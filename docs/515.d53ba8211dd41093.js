"use strict";(self.webpackChunkEcommerc=self.webpackChunkEcommerc||[]).push([[515],{1515:(f,c,i)=>{i.r(c),i.d(c,{PaymentComponent:()=>Z});var p=i(6814),r=i(95),t=i(4769),g=i(1120),s=i(6286);function C(e,u){1&e&&(t.TgZ(0,"p"),t._uU(1," details is required "),t.qZA())}function a(e,u){1&e&&(t.TgZ(0,"p"),t._uU(1," details min length 3 "),t.qZA())}function _(e,u){if(1&e&&(t.TgZ(0,"div",11),t.YNc(1,C,2,0,"p",12),t.YNc(2,a,2,0,"p",12),t.qZA()),2&e){const n=t.oxw();let o,l;t.xp6(1),t.Q6J("ngIf",null==(o=n.orderForm.get("details"))?null:o.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(l=n.orderForm.get("details"))?null:l.getError("minlength"))}}function T(e,u){1&e&&(t.TgZ(0,"p"),t._uU(1," phone is required "),t.qZA())}function v(e,u){1&e&&(t.TgZ(0,"p"),t._uU(1," Accept only Egypt phone numbers "),t.qZA())}function I(e,u){if(1&e&&(t.TgZ(0,"div",11),t.YNc(1,T,2,0,"p",12),t.YNc(2,v,2,0,"p",12),t.qZA()),2&e){const n=t.oxw();let o,l;t.xp6(1),t.Q6J("ngIf",null==(o=n.orderForm.get("phone"))?null:o.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(l=n.orderForm.get("phone"))?null:l.getError("pattern"))}}function y(e,u){1&e&&(t.TgZ(0,"p"),t._uU(1," city is required "),t.qZA())}function E(e,u){if(1&e&&(t.TgZ(0,"div",11),t.YNc(1,y,2,0,"p",12),t.qZA()),2&e){const n=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",null==(o=n.orderForm.get("city"))?null:o.getError("required"))}}let Z=(()=>{class e{constructor(n,o){this._ActivatedRoute=n,this._CartService=o,this.cartId="",this.orderForm=new r.cw({details:new r.NI("",[r.kI.required,r.kI.minLength(3)]),phone:new r.NI("",[r.kI.required,r.kI.pattern(/^01[0125][0-9]{8}$/)]),city:new r.NI("",[r.kI.required])})}handelForm(){this._CartService.checkOut(this.cartId,this.orderForm.value).subscribe({next:n=>{"success"==n.status&&window.open(n.session.url,"_self")}})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:n=>{this.cartId=n.get("id")}})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(g.gz),t.Y36(s.N))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-payment"]],standalone:!0,features:[t.jDz],decls:19,vars:4,consts:[[1,"w-75","mx-auto","rounded","shadow","p-3","mt-5","bg-main-light"],[3,"formGroup","ngSubmit"],[1,"form-item"],["for","details"],["type","text","id","details","formControlName","details",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","phone"],["type","tel","id","phone","formControlName","phone",1,"form-control"],["for","city"],["type","text","id","city","formControlName","city",1,"form-control"],[1,"btn","btn-info","text-light","w-100","mt-5"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(o,l){if(1&o&&(t.TgZ(0,"section",0)(1,"form",1),t.NdJ("ngSubmit",function(){return l.handelForm()}),t.TgZ(2,"div",2)(3,"label",3),t._uU(4,"Details"),t.qZA(),t._UZ(5,"input",4),t.YNc(6,_,3,2,"div",5),t.qZA(),t.TgZ(7,"div",2)(8,"label",6),t._uU(9,"phone"),t.qZA(),t._UZ(10,"input",7),t.YNc(11,I,3,2,"div",5),t.qZA(),t.TgZ(12,"div",2)(13,"label",8),t._uU(14,"city"),t.qZA(),t._UZ(15,"input",9),t.YNc(16,E,2,1,"div",5),t.qZA(),t.TgZ(17,"button",10),t._uU(18,"Pay Now"),t.qZA()()()),2&o){let m,d,h;t.xp6(1),t.Q6J("formGroup",l.orderForm),t.xp6(5),t.Q6J("ngIf",(null==(m=l.orderForm.get("details"))?null:m.errors)&&(null==(m=l.orderForm.get("details"))?null:m.touched)),t.xp6(5),t.Q6J("ngIf",(null==(d=l.orderForm.get("phone"))?null:d.errors)&&(null==(d=l.orderForm.get("phone"))?null:d.touched)),t.xp6(5),t.Q6J("ngIf",(null==(h=l.orderForm.get("city"))?null:h.errors)&&(null==(h=l.orderForm.get("city"))?null:h.touched))}},dependencies:[p.ez,p.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return e})()},6286:(f,c,i)=>{i.d(c,{N:()=>g});var p=i(5619),r=i(4769),t=i(9862);let g=(()=>{class s{constructor(a){this._HttpClient=a,this.baseUrl="https://route-ecommerce.onrender.com/api/v1/",this.cartNumber=new p.X(0),this.allTokens={token:localStorage.getItem("xtoken")}}addToCart(a){return this._HttpClient.post(this.baseUrl+"cart",{productId:a},{headers:this.allTokens})}getCartUser(){return this._HttpClient.get(this.baseUrl+"cart",{headers:this.allTokens})}removeCartItem(a){return this._HttpClient.delete(this.baseUrl+`cart/${a}`,{headers:this.allTokens})}updateCartCount(a,_){return this._HttpClient.put(this.baseUrl+`cart/${a}`,{count:_},{headers:this.allTokens})}clearCartItem(){return this._HttpClient.delete(this.baseUrl+"cart",{headers:this.allTokens})}checkOut(a,_){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${a}?url=http://localhost:4200`,{shippingAddress:_},{headers:this.allTokens})}static#t=this.\u0275fac=function(_){return new(_||s)(r.LFG(t.eN))};static#e=this.\u0275prov=r.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()}}]);